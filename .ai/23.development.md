# 23.development.md

## Commands

- `bun test` - テストを実行する
- `bun run format` - コードのエラーを修正して整形する
- `bun --cwd app tsc --noEmit` - 型エラーを確認する
- `bun --cwd api tsc --noEmit` - 型エラーを確認する

## APIにMutationを追加する

データを更新する機能を追加する場合、以下のファイルを読み書きしてください。

- `api/interface/mutation-fields/*.ts` - GraphQLのMutation
- `api/interface/inputs/*-input.ts` - GraphQLのMutationのInput
- `api/interface/objects/*-node.ts` - GraphQLのNode
- `api/application/*.ts` - ユースケース
- `api/domain/entities/*.entity.ts` - Entity
- `api/domain/values/*.value.ts` - Value Objects
- `api/infrastructure/repositories/*.repository.ts` - リポジトリ
- `api/infrastructure/adapters/*.adapter.ts` - 外部APIなど
- `api/interface/schema.ts` - GraphQLのスキーマ

## APIにQueryを追加する

データを取得する機能を追加する場合、以下のファイルを読み書きしてください。

- `api/interface/query-fields/*.ts` - GraphQLのQuery
- `api/interface/objects/*-node.ts` - GraphQLのNode
- `api/interface/schema.ts` - GraphQLのスキーマ

## フロントエンド開発

フロントエンド機能を追加する際は、以下のディレクトリ構造に従ってください。

- `app/interface/components/` - Reactコンポーネント
- `app/interface/hooks/` - カスタムReactフック
- `app/interface/routes/` - ルーティング定義
- `app/lib/` - ユーティリティ関数とクライアント実装

GraphQL操作を追加する場合は、以下の手順に従います。

```bash
# GraphQLスキーマの生成
bun run --cwd app generate
```

## Prismaのスキーマを生成する

スキーマを更新した際は実行しなさい。

```bash
bun run generate
```

マイグレーションを作成する。

```bash
bun run --cwd api create-migration
```

マイグレーションを実行する。

```bash
bun run --cwd api run-migration
```

## トラブルシューティング

一般的な問題解決方法：

- ログを確認する（APIとアプリケーションの両方）
- 依存関係が正しくインストールされているか確認
- 環境変数が正しく設定されているか確認
- データベース接続が正常か確認
