# アーキテクチャ概要

## レイヤードアーキテクチャ

Open Stackプロジェクトは、保守性と拡張性を確保するため、レイヤードアーキテクチャとドメイン駆動設計（DDD）の原則に基づいて設計されています。

### ドメイン層 (api/domain/)

システムの中核となるビジネスロジックとルールを含みます：

- エンティティ (`*.entity.ts`): ユーザー、プロジェクト、プロジェクトメンバーなどのビジネスエンティティ
- 値オブジェクト (`*.value.ts`): 名前などの不変の値オブジェクト
- バリデーション: valibotを使用したビジネスルールの検証

### アプリケーション層 (api/application/)

ユースケースを実装するクラスを含みます：

- ユーザー関連ユースケース: ユーザー作成、更新など
- プロジェクト関連ユースケース: プロジェクト作成、メンバー追加など
- エラー処理: GraphQLエラークラスを活用した統一的なエラーハンドリング

### インフラストラクチャ層 (api/infrastructure/)

外部との連携を担当します：

- リポジトリ (`*.repository.ts`): エンティティの永続化
- アダプター (`*.adapter.ts`): 外部サービスとの連携
- Prisma: データベースアクセスのORMとして使用

### インターフェース層 (api/interface/)

外部とのやり取りを担当します：

- GraphQL: スキーマ定義、リゾルバー
- エラー処理: 統一的なエラーレスポンス形式
- 認証・認可: JWTを使用したセッション管理

## フロントエンドアーキテクチャ

フロントエンドはReactとTailwindCSSを使用した構造を持ちます：

- コンポーネント構造: ページコンポーネントとUI要素の分離
- GraphQLクライアント: APIとの通信
- 状態管理: Reactコンテキストとフック

## データフロー

1. ユーザーアクション → フロントエンドのイベントハンドラ
2. GraphQLクライアント → APIリクエスト
3. バックエンドのGraphQLエンドポイント → アプリケーション層のユースケース
4. ドメイン層でのビジネスロジック実行
5. インフラストラクチャ層でのデータ永続化
6. レスポンス → フロントエンド表示の更新